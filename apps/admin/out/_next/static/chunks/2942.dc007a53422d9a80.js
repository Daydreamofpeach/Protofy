"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2942],{72555:function(e,t,i){i.r(t),t.default={src:"/admin/_next/static/media/logo.12766b1b.png",height:572,width:572,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAdVBMVEUBAgIAAgIBAQEAAQEBAgIBAQEBAQEAAQEAAQEAAQEAAQEBAgIBAQEBAgIBAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQEAAQGs73SBAAAAJ3RSTlMAAAAAAQEEBgcNDxsbHR0vMTU2P0BKX2RmZ3J0e31/goiQkpaXnZ4UCFX1AAAARUlEQVR42gVABRKAIBBcXQM74QxEDPz/Ex3EbJ+3IZBKGMYgCYwHCW+wzJlz+bRCdHSckRaIZVHSCtR+V/W1KZD9FzryB5lZBEw3DyQBAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},92942:function(e,t,i){i.r(t),i.d(t,{default:function(){return ew}});var l=i(52322),r=i(2784),n=i(45160),o=i(82527),s=i(92467),d=i(15729);let a=(0,s.Z)((e,t)=>({isSourceCodeVisible:void 0,device:"ipad11-horizontal",parser:void 0,currentPageContent:"",currentNodeId:"",currentPageInitialJson:{},setIsSourceCodeVisible:t=>e((0,d.ZP)(e=>{e.isSourceCodeVisible=t})),setCurrentNodeId:t=>e((0,d.ZP)(e=>{e.currentNodeId=t})),setParser:t=>e((0,d.ZP)(e=>{e.parser=t})),setCurrentPageContent:t=>e((0,d.ZP)(e=>{e.currentPageContent=t})),setCurrentPageInitialJson:t=>e((0,d.ZP)(e=>{e.currentPageInitialJson=t}))}));var c=i(18299),p=i(28316),u=i(60163),h=i(50637),f=i(40178),m=i(81267),g=i(32678);let x=e=>{let{render:t}=e,{id:i}=(0,n.Zo)(),{actions:o,query:s,isActive:d}=(0,n.jE)((e,t)=>({isActive:t.getEvent("selected").contains(i)})),{isHover:a,dom:x,name:v,moveable:y,deletable:b,connectors:{drag:E},parent:C,childs:A,nodeAndSiblings:I,nodeId:j,unknown:w}=(0,n.Zo)(e=>{var t,i,l;return{unknown:null!==(l=e.data.custom.unknown)&&void 0!==l&&l,nodeId:e.id,isHover:e.events.hovered,dom:e.dom,name:e.data.custom.displayName||e.data.displayName,moveable:s.node(e.id).isDraggable(),deletable:s.node(e.id).isDeletable()&&s.node(e.id).isDraggable(),parent:e.data.parent,props:e.data.props,childs:e.data.nodes,nodeAndSiblings:(null===(t=e.data)||void 0===t?void 0:t.parent)?s.node(null===(i=e.data)||void 0===i?void 0:i.parent).childNodes():void 0}}),S=w?"#EF9364":"#2680EB",J=(0,r.useRef)();(0,r.useEffect)(()=>{x&&(d||a?x.style.border="1px dashed "+S:x.style.border="")},[x,d,a,!0]);let k=(0,r.useCallback)(e=>{let{top:t,left:i,bottom:l}=e?e.getBoundingClientRect():{top:0,left:0,bottom:0};return{top:"".concat(t>2?t:l,"px"),left:"".concat(i,"px")}},[]),T=(0,r.useCallback)(()=>{let{current:e}=J;if(!e)return;let{top:t,left:i}=k(x);e.style.top=t,e.style.left=i},[x,k]);return(0,r.useEffect)(()=>{var e,t;return null===(t=document)||void 0===t||null===(e=t.querySelector(".craftjs-renderer"))||void 0===e||e.addEventListener("scroll",T),()=>{var e,t;null===(t=document)||void 0===t||null===(e=t.querySelector(".craftjs-renderer"))||void 0===e||e.removeEventListener("scroll",T)}},[T]),(0,r.useEffect)(()=>{var e;let t=e=>{e.preventDefault(),e.stopPropagation()};return null===(e=document.getElementById("editor-layout"))||void 0===e||e.addEventListener("click",t),()=>{var e;return null===(e=document.getElementById("editor-layout"))||void 0===e?void 0:e.removeEventListener("click",t)}},[]),(0,l.jsxs)(l.Fragment,{children:[a||d?p.createPortal((0,l.jsxs)("div",{ref:J,style:{left:k(x).left,top:k(x).top,zIndex:1e31,position:"fixed",backgroundColor:S,padding:"10px",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",height:"30px",marginTop:"-29px",pointerEvents:"auto"},children:[(0,l.jsxs)("div",{style:{fontSize:10,color:"white",marginRight:10},children:[v,w?" (Unknown)":""]}),(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"row",flex:1},children:[y?(0,l.jsx)("div",{ref:E,style:{cursor:"grab"},title:"Move",children:(0,l.jsx)(u.Z,{color:"white",size:14})}):null,i!==c.QS&&"ROOT"!=C?(0,l.jsx)("div",{style:{margin:"0px 8px 0px 8px",cursor:"pointer"},title:"Go to parent",children:(0,l.jsx)(h.Z,{onMouseDown:e=>{o.selectNode(C),e.stopPropagation()},color:"white",size:14})}):null,A.length?(0,l.jsx)("div",{style:{marginRight:"ROOT"!=C?"8px":"",cursor:"pointer"},title:"Go to first child",children:(0,l.jsx)(f.Z,{onMouseDown:e=>{o.selectNode(A[0]),e.stopPropagation()},color:"white",size:14})}):null,(null==I?void 0:I.length)>1?(0,l.jsx)("div",{style:{margin:"0px 8px 0px 0px",cursor:"pointer"},title:"Go to next sibling",children:(0,l.jsx)(m.Z,{onMouseDown:e=>{let t=I.indexOf(j),i=(t+1)%I.length,l=I[i];o.selectNode(l),e.stopPropagation()},color:"white",size:14})}):null,b?(0,l.jsx)("div",{style:{cursor:"pointer"},title:"Delete",children:(0,l.jsx)(g.Z,{onMouseDown:e=>{e.stopPropagation(),o.delete(i)},color:"white",size:14})}):null]})]}),document.querySelector(".page-container")):null,t]})},v=e=>(0,l.jsx)(l.Fragment,{children:e.children});v.craft={props:{},related:{settings:()=>(0,l.jsx)("div",{})}};let y=e=>{var t;let{connectors:{connect:i},setProp:r}=(0,n.Zo)(e=>({selected:e.events.selected,custom:e.data.custom}));return(0,l.jsx)("div",{ref:i,style:{minHeight:"30px"},children:null!==(t=e.children)&&void 0!==t?t:"Unknown"})};y.craft={props:{},related:{settings:()=>(0,l.jsx)("div",{})}};var b={craft:{Root:v,Unknown:y}},E=i(97729),C=i.n(E),A=i(45054),I=i(85067),j=i.n(I),w=i(20477),S=i(28261),J=i.n(S),k=i(29691),T=i.n(k),N=0;let P=()=>"nodeId-"+N++;class D{static parse(e){let t=new w.IKL({useInMemoryFileSystem:!0,manipulationSettings:{indentationText:w.xI4.Tab},compilerOptions:{target:w.H7j.Latest,scriptKind:w.hVH.TSX,languageVariant:w.C$L.JSX}});return new D(t.createSourceFile("_temp2.tsx",e,{overwrite:!0}))}getContent(){return this.getFirstDescendant("JsxElement")}getFirstDescendant(e){var t,i;let l=w.lGB[e];return e?null===(t=this.ast)||void 0===t?void 0:t.getFirstDescendantByKind(l):null===(i=this.ast)||void 0===i?void 0:i.getFirstDescendant()}static getAllJsxElements(e){let t=this.getAllJsxChildren(e),i=[e,...t];return i}static getAttributes(e){let t=this.isKind(e,"JsxElement"),i=this.isKind(e,"JsxSelfClosingElement");if(!e||!t&&!i)throw"Not valid node to get attributes";return t?this.getJsxElementAttributes(e):i?this.getJsxSelfClosingElementAttributes(e):void 0}static getJsxAttribute(e,t){if(!e||!this.isKind(e,"JsxElement")&&!this.isKind(e,"JsxSelfClosingElement"))throw"Error node provided is not a JsxElement or JsxSelfClosingElement, can't get the specified attribute";let i=this.getAttributes(e).find(e=>e.getNameNode().getText()==t);if(!i)throw"Can't get attribute ".concat(t);return i}static getAttributeKey(e){if(!e||!this.isKind(e,"JsxAttribute"))throw"Can't get attribute key, the node provided isn't a JsxAttribute";return e.getNameNode().getText()}static getAttributeValue(e){if(!e||!this.isKind(e,"JsxAttribute"))throw"Can't get attribute value, the node provided isn't a JsxAttribute";return e.getInitializer()}static getJsxElementAttributes(e){if(!e||!this.isKind(e,"JsxElement"))throw"Error node provided is not a JsxElement, can't get its attributes";return e.getOpeningElement().getAttributes()}static getJsxSelfClosingElementAttributes(e){if(!e||!this.isKind(e,"JsxSelfClosingElement"))throw"Error node provided is not a JsxSelfClosingElement, can't get its attributes";return e.getAttributes()}static getJsxElementName(e){let t=this.isKind(e,"JsxElement"),i=this.isKind(e,"JsxSelfClosingElement");if(!e||!t&&!i)throw"Not valid node to get Name";return t?this.getJsxElementIdentifier(e):i?this.getJsxSelfClosingElementIdentifier(e):void 0}static getJsxElementIdentifier(e){if(!e||!this.isKind(e,"JsxElement"))throw"Error node provided is not a JsxElement, can't get its Identifier";let t=e.getOpeningElement(),i=t.getTagNameNode(),l=i.getText();return{node:i,name:l}}static getJsxSelfClosingElementIdentifier(e){if(!e||!this.isKind(e,"JsxSelfClosingElement"))throw"Error node provided is not a JsxSelfClosingElement, can't get its Identifier";let t=e.getTagNameNode(),i=t.getText();return{node:t,name:i}}static getJsxChildren(e){if(this.isKind(e,"JsxSelfClosingElement"))throw"Can't obtain children from JsxSelfClosingElement";if(!e||!this.isKind(e,"JsxElement"))throw"Can't obtain node children";let t=e.getChildrenOfKind(w.lGB.SyntaxList)[0],i=t.getChildren();return i}static getJsxTextOfJsxElement(e){if(this.isKind(e,"JsxSelfClosingElement"))return;let t=this.getJsxChildren(e);if(t.length&&this.isKind(t[0],"JsxText"))return t[0]}static getJsxChildrenFirstLevel(e){if(!(this.isKind(e,"JsxSelfClosingElement")||this.isKind(e,"JsxExpression")))return this.getJsxChildren(e).filter(e=>this.isKind(e,"JsxElement")||this.isKind(e,"JsxSelfClosingElement")||this.isKind(e,"JsxExpression"))}static getAllJsxChildren(e){var t;let i;try{(i=this.getJsxChildrenFirstLevel(e)).forEach(e=>{i=[...i,...this.getAllJsxChildren(e)]})}catch(e){}return null!==(t=null==i?void 0:i.sort((e,t)=>e.getPos()-t.getPos()))&&void 0!==t?t:[]}static isKind(e,t){return t==e.getKindName()}static getNodeData(e){let t=this.getJsxElementName(e).name,i=this.getAttributes(e),l={},r={_nodeType:e.getKindName()};i.forEach(e=>{let t=this.getAttributeKey(e),i=this.getAttributeValue(e),{value:n,nodeKind:o}=this.nodeValueFactory(i);n&&t&&(l={...l,[t]:n}),o&&t&&(r={...r,[t]:o})});let n=this.getJsxTextOfJsxElement(e);return n&&n.getText()&&(l={...l,children:n.getText()},r={...r,children:"StringLiteral"}),{type:{resolvedName:t},isCanvas:!0,props:l,displayName:t,custom:r,hidden:!1,nodes:[],linkedNodes:{}}}static flatten(e,t,i){var l;if(!e||!this.isKind(e,"JsxElement")&&!this.isKind(e,"JsxSelfClosingElement"))return;let r=null!==(l=D.getIdentifier(e))&&void 0!==l?l:this.getIdFromSourceCode(e),n=this.getNodeData(e),o=[],s=this.getJsxChildrenFirstLevel(e);for(let e=0;e<(null==s?void 0:s.length);e++){let i=s[e];o.push(this.flatten(i,t,r))}let d={...n,nodes:o,parent:i};return t[r]=d,r}static getNodes(e){if(!e||!this.isKind(e,"JsxElement"))throw"Can't getNodes from the give node that has no kind of type JsxElement";let t={};return this.flatten(e,t,"ROOT"),t}static toCraftNodes(e){var t;let i={type:{resolvedName:"Root"},isCanvas:!0,props:{"data-cy":"root-container"},displayName:"Root",custom:{},hidden:!1,nodes:[],linkedNodes:{}},l=this.getNodes(e),r=null===(t=Object.keys(l))||void 0===t?void 0:t.find(e=>"ROOT"==l[e].parent),n={};return r?(i={...i,nodes:[...i.nodes,r]},n={...l,ROOT:i}):n={ROOT:i},n}static deleteCraftThemeNode(e){let t={};return Object.keys(e).forEach(i=>{"theme-id"!=i&&(t={...t,[i]:e[i]})}),t}addCustomProps(e){let t=this.getImportDeclarations(),i={};return Object.keys(e).forEach(l=>{let r=e[l],n=D.getDisplayNameInNamedImports(r.displayName,t),o={...r,custom:{...r.custom,...n}};i={...i,[l]:o}}),i}getImportDeclarations(){let e=this.ast.getImportDeclarations(),t=[];return e.forEach(e=>{var i,l;let r=e.getNamedImports().length?e.getNamedImports():void 0,n=null==r?void 0:r.map(e=>{var t;return{name:e.getName(),alias:null===(t=e.getAliasNode())||void 0===t?void 0:t.getText()}}),o=null===(i=e.getDefaultImport())||void 0===i?void 0:i.getText(),s=null===(l=e.getModuleSpecifier())||void 0===l?void 0:l.getText();t=[...t,{namedImports:n,defaultImport:o,moduleSpecifier:s}]}),t}flattenImportDeclarations(){let e=this.getImportDeclarations();return e.reduce((e,t)=>{let i=t.namedImports,l=t.defaultImport,r=t.moduleSpecifier;if(null==i?void 0:i.length){let t=i.reduce((e,t)=>[...e,{namedImports:[t],defaultImport:void 0,moduleSpecifier:r}],[]),n=[];return l&&(n=[{namedImports:void 0,defaultImport:l,moduleSpecifier:r}]),[...e,...t,...n]}return[...e,t]},[])}dumpImportDeclarations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"@/components/",i=this.flattenImportDeclarations();Object.keys(e).filter(t=>!["ReactCode","Root"].includes(e[t].displayName)).forEach(l=>{var r,n,o,s;let d=e[l],a=d.displayName,c=null===(r=d.custom)||void 0===r?void 0:r.namedImportName,p=null===(n=d.custom)||void 0===n?void 0:n.namedImportAlias,u=null===(o=d.custom)||void 0===o?void 0:o.moduleSpecifier,h=null===(s=d.custom)||void 0===s?void 0:s.defaultImport,f=i.findIndex(e=>{var t,i,l,r;return[e.defaultImport,(null===(t=e.namedImports)||void 0===t?void 0:t.length)?null===(i=e.namedImports[0])||void 0===i?void 0:i.name:"",(null===(l=e.namedImports)||void 0===l?void 0:l.length)?null===(r=e.namedImports[0])||void 0===r?void 0:r.alias:""].includes(a)});-1===f?i[i.length]={namedImports:void 0,defaultImport:a,moduleSpecifier:"'".concat(t).concat(a,"'")}:i[f]={namedImports:c||p?[{name:c,alias:p}]:void 0,defaultImport:c||p?void 0:h,moduleSpecifier:u}});let l=[];i.forEach(e=>{var t,i,r,n,o;let s=null==l?void 0:l.findIndex(t=>(null==t?void 0:t.moduleSpecifier)==(null==e?void 0:e.moduleSpecifier)),d=(null===(t=e.namedImports)||void 0===t?void 0:t.length)?e.namedImports[0]:void 0,a=(null==d?void 0:d.length)?void 0:e.defaultImport;-1===s?l[l.length]={defaultImport:a,namedImports:d?[d]:void 0,moduleSpecifier:null==e?void 0:e.moduleSpecifier}:l[s]={...l[s],defaultImport:(null===(i=l[s])||void 0===i?void 0:i.defaultImport)?null===(r=l[s])||void 0===r?void 0:r.defaultImport:a,namedImports:d?[...null===(n=l[s])||void 0===n?void 0:n.namedImports,d]:null===(o=l[s])||void 0===o?void 0:o.namedImports}});let r=D.importDeclarationFactory(l);return r}static getDisplayNameInNamedImports(e,t){for(let i=0;i<(null==t?void 0:t.length);i++){let l=t[i],r=null==l?void 0:l.namedImports,n=null==l?void 0:l.defaultImport,o=null==l?void 0:l.moduleSpecifier;if(n===e)return{defaultImport:e,moduleSpecifier:o};if(r)for(let t=0;t<(null==r?void 0:r.length);t++){let i=r[t],l=null==i?void 0:i.name,n=null==i?void 0:i.alias;if(n===e||l===e)return{namedImportName:l,namedImportAlias:n,moduleSpecifier:o}}}return{}}identifyElements(e){let t=D.getAllJsxElements(this.getContent());for(let i=0;i<t.length;i++){let l,r="";t=D.getAllJsxElements(this.getContent());let n=D.getAttributes(t[i]);try{D.getJsxAttribute(t[i],"_nodeId")}catch(l){r+=' _nodeId="'.concat(e?P():D.getSameIdAsFlows(t[i]),'" ')}l=n.length?n[0].getStart():D.getJsxElementName(t[i]).node.getEnd(),this.ast.insertText(l,e=>e.write(r))}return this}static getIdentifier(e){try{let t=D.getJsxAttribute(e,"_nodeId"),i=D.getAttributeValue(t);return this.nodeValueFactory(i).value}catch(e){console.error("Could not find node identifier")}}unidentifyElements(){let e=D.getAllJsxElements(this.getContent());for(let t=0;t<e.length;t++){e=D.getAllJsxElements(this.getContent());try{let i=D.getJsxAttribute(e[t],"_nodeId");this.ast.removeText(i.getStart(),i.getEnd())}catch(e){}}return this}static getJsxElementByIdentifier(e,t){let i=this.getAllJsxElements(e),l=i.find(e=>this.getIdentifier(e)==t);if(!l)throw'Could not find element specified with uuid "'.concat(t,'" in the provided node');return l}convertJsxExpressionToJsxElement(){let e=()=>{let e=this.getContent();return D.getAllJsxElements(e).filter(e=>"JsxExpression"==e.getKindName())},t=i=>{i.length&&(this.ast.replaceText([i[0].getPos(),i[0].getEnd()],""),t(e()))};return t(e()),this}data(e){this.convertJsxExpressionToJsxElement(),e&&this.identifyElements(e);let t=this.getContent(),i=D.toCraftNodes(t);return this.addCustomProps(i)}dump(e,t){e=D.deleteCraftThemeNode(e);let i=this.traverseDump(e,"ROOT"),l=this.getContent();this.ast.replaceText([l.getPos(),l.getEnd()],i);let r=this.ast.getImportDeclarations();if(null==r?void 0:r.length){let i=this.dumpImportDeclarations(e,t);r.forEach(e=>e.replaceWithText("")),this.ast.insertText(0,i)}let n=this.ast.getText();return D.formatText(n)}static formatText(e){let t;try{t=T().format(e,{bracketSameLine:!0,jsxBracketSameLine:!0,singleAttributePerLine:!1,printWidth:1e3,quoteProps:"consistent",jsxSingleQuote:!1,parser:"typescript",plugins:[J()]})}catch(e){console.error("Could not format text. Error: "+e)}return null!=t?t:e}traverseDump(e,t){var i;let l=e[t],r="";return null===(i=l.nodes)||void 0===i||i.forEach(t=>{let i=this.traverseDump(e,t);r+=i}),r=D.reactElementFactory(l,r)}static importDeclarationFactory(e){let t="";return null==e||e.forEach(e=>{var i,l,r,n,o;t+="import "+(null!==(o=null==e?void 0:e.defaultImport)&&void 0!==o?o:""),(null==e?void 0:null===(i=e.namedImports)||void 0===i?void 0:i.length)>0&&(null==e?void 0:e.defaultImport)&&(t+=","),(null==e?void 0:null===(l=e.namedImports)||void 0===l?void 0:l.length)&&(t+=" {"),null==e||null===(r=e.namedImports)||void 0===r||r.forEach((i,l)=>{(null==i?void 0:i.alias)?t+=" "+(null==i?void 0:i.name)+" as "+(null==i?void 0:i.alias):t+=" "+(null==i?void 0:i.name),(null==e?void 0:e.namedImports.length)!==l+1&&(t+=",")}),(null==e?void 0:null===(n=e.namedImports)||void 0===n?void 0:n.length)&&(t+=" }"),t+=" from "+(null==e?void 0:e.moduleSpecifier)+"\n"}),t}static reactElementFactory(e,t){let i;let l=e.displayName;if("ReactCode"===l){let t=e.props.codeBlock;i="".concat(t)}else{let r,n="";if(Object.keys(e.props).filter(e=>!["_nodeId"].includes(e)).forEach(t=>{let i=e.props[t];if("StringLiteral"==e.custom[t]&&"children"!=t&&(i='"'.concat(i,'"')),"children"==t){r=i;return}void 0===i?n+=" ".concat(t):n+=" ".concat(t,"=").concat(i)}),"JsxSelfClosingElement"===e.custom._nodeType){let e=r?' children="'.concat(r,'"'):"";i="<"+"".concat(l)+n+e+"/>"}else i="<"+"".concat(l)+n+">"+"".concat(null!=r?r:"")+t+"</"+"".concat(l)+">"}return i}static nodeValueFactory(e){let t;let i=null==e?void 0:e.getKindName();return{value:"StringLiteral"===i?null==e?void 0:e.getLiteralValue():null==e?void 0:e.getText(),nodeKind:i}}static getIdFromSourceCode(e){try{return e.getKindName()+"_"+e._compilerNode.pos+"_"+e._compilerNode.end}catch(t){return e}}constructor(e){this.ast=e}}var z=i(64509),O=i(52026),R=i(8939);class K extends r.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){if(this.state.hasError){var e;return(0,l.jsx)(O.Stack,{style:{height:"100vh",justifyContent:"center",alignItems:"center"},children:(0,l.jsxs)(R.FA,{width:"80%",maxWidth:"600px",alignItems:"center",children:[(0,l.jsx)(O.Text,{children:"Can not render Visual UI frame due the following error:"}),(0,l.jsx)(O.Text,{color:"red",marginTop:"10px",children:null===(e=this.state.error)||void 0===e?void 0:e.message})]})})}return this.props.children}constructor(e){super(e),this.state={hasError:!1}}}let B=(e,t,i)=>{t(eC+"/ui",e),i&&i()},L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"customCode.tsx",i=new w.IKL({useInMemoryFileSystem:!0,manipulationSettings:{indentationText:w.xI4.Tab},compilerOptions:{target:w.H7j.Latest,scriptKind:w.hVH.TSX,languageVariant:w.C$L.JSX}}),l=i.createSourceFile(t,e,{overwrite:!0});return l},Q=(e,t,i)=>{var l,r;let n=null===(l=e.filter(e=>"ImportDeclaration"==e.type))||void 0===l?void 0:l.map(e=>e.id),o=null===(r=e.filter(e=>["JsxElement","JsxSelfClosingElement"].includes(e.type)))||void 0===r?void 0:r.map(e=>e.id),s=[];n.forEach(e=>{let i=t[e],l=i.module;Object.keys(i).forEach(e=>{let t;"default"==e&&i[e]?(t={defaultImport:i.default,moduleSpecifier:l},s.push(t)):e.startsWith("import-")&&i[e]&&(t={namedImports:[{name:i[e],alias:void 0}],moduleSpecifier:l},s.push(t))})});let d=[];function a(e){for(let t of s){if(t.defaultImport===e)return!0;if(t.namedImports){for(let i of t.namedImports)if(i.name===e)return!0}}return!1}e.forEach(e=>{o.includes(e.id)&&d.push({...e.data,tagName:t[e.id].name})});let c=function(){let e=[];for(let t of d){let{tagName:i,namedImports:l,defaultImport:r}=t;a(i)||l||r||e.push({defaultImport:i}),!a(i)&&(l||r)&&e.push(t)}return e}();return c};var Z=i(60545),F=(0,z.Ic)(e=>{var t;let{children:o,topics:s,onSave:d,resolveComponentsDir:c}=e,p=(0,r.useRef)(),u=a(e=>e.currentPageContent),h=a(e=>e.currentPageInitialJson),f=a(e=>e.setCurrentPageInitialJson),[m,g]=(0,r.useState)(!1),[x,v]=(0,r.useState)({}),[y,b]=(0,r.useState)(),{publish:E,data:I}=s,{actions:w,query:S,connectors:J}=(0,n.jE)((e,i)=>{let l=JSON.parse(i.serialize()),r=j().diff(h,JSON.parse(i.serialize()));b(null===(s=e.events.selected)||void 0===s?void 0:s.keys().next().value);let n=(null==r?void 0:r.length)>0,o=j().diff(x,l);if(!i.getOptions().skipTopic&&(null==o?void 0:o.length)&&JSON.stringify(o)!=t){var s,d,a={};if(1==o.filter(e=>"N"==e.kind).length){let e=o.find(e=>"N"==e.kind).path[0],t=l[e].parent,i=l[t].nodes.findIndex(t=>t==e),r=l[e].custom;B(a={action:"add-node",nodeId:e,nodeName:l[e].displayName,parent:t,childrenPos:i,data:r,nodeProps:l[e].props},E)}else if(o.find(e=>"D"==e.kind)){let e=o.filter(e=>"D"==e.kind).map(e=>e.path[0]),t=o.find(e=>"A"==e.kind).path[0];B(a={action:"delete-node",deletedNodes:e,parent:t},E)}else if(o.find(e=>"E"==e.kind)){let e=o.find(e=>"E"==e.kind&&"parent"==e.path[1]),t=o.find(e=>"E"==e.kind&&"children"==e.path[2]);if(t){let e=t.path[0],i=t.rhs;a={action:"edit-node",nodeId:e,newChildValue:i}}else if(e){let t=e.path[0],i=e.rhs,l=e.lhs,r=x[l].nodes.findIndex(e=>e==t),n=o.find(e=>"E"==e.kind&&e.path[0]==i&&e.rhs==t),s=null!==(d=null==n?void 0:n.path[2])&&void 0!==d?d:-1;a={action:"move-node",isSameParent:!1,nodeId:t,oldParentId:l,newParentId:i,newPos:s,oldPos:r}}else{let e=o.find(e=>"E"==e.kind&&"nodes"==e.path[1]),t=e.path[0],i=o.sort((e,t)=>e.path[2]-t.path[2]).map(e=>e.rhs),l=x[t].nodes,r=function(e,t){let i=[],l={};for(let t=0;t<e.length;t++)l[e[t]]=t;for(let e=0;e<t.length;e++){let r=t[e];i.push(l[r])}return i}(l,i);a={action:"move-node",isSameParent:!0,parent:t,childrenIndexes:r}}B(a,E)}t=JSON.stringify(o),v(l)}return{hasChanges:n,currentEditorNodes:l,enabled:e.options.enabled}}),k=(e,t,i,l,r)=>(e[t]=i,e[l].nodes.splice(r,0,t),e);(0,r.useEffect)(()=>{y&&E("zoomToNode",{id:y})},[y]),(0,r.useEffect)(()=>{let e=I["flow/editor"],t=e.action,i=e.nodeId,l=e.value,r=e.param;switch(t){case"delete-node":var n;if("JsxElement"!=e.deletedNodeType)return;w.setOptions(e=>e.skipTopic=!0),null===(n=e.nodesToDelete)||void 0===n||n.forEach(e=>w.delete(e)),v(JSON.parse(S.serialize()));break;case"delete-data":if(!r)return;try{w.setOptions(e=>e.skipTopic=!0),w.setProp(i,e=>(delete e[r],e)),v(JSON.parse(S.serialize()))}catch(e){console.error("error deleting data. ",e)}break;case"edit-data":if(!r)return;try{w.setOptions(e=>e.skipTopic=!0);let t=l;try{t=JSON.parse(t)}catch(e){}w.setProp(i,e=>e[r]=t),w.setCustom(i,e=>e[r]="JsxText");let n=null==e?void 0:e.deleteKey;n&&w.setProp(i,e=>(delete e[n],e)),v(JSON.parse(S.serialize()))}catch(e){console.error("error editing data. ",e)}break;case"add-data":let o=JSON.parse(S.serialize());if(!o[i])return;try{o[i]={...o[i],props:{...o[i].props,[r]:l}},w.setOptions(e=>e.skipTopic=!0),w.setProp(i,e=>e[r]=l),v(o)}catch(e){console.error("error adding data. ",e)}break;case"add-node":let s=e.type,d=e.childrenPos,a=e.nodeName,p=e.parent;if("JsxElement"==s){let e={displayName:a,props:{},custom:{defaultImport:a,moduleSpecifier:'"'.concat(c).concat(a,'"'),_nodeType:"JsxElement"},hidden:!1,isCanvas:!0,parent:p,type:{resolvedName:a},nodes:[]},t=JSON.parse(S.serialize());if(!p||!t)return;try{let l=k(t,i,e,p,d);w.setOptions(e=>e.skipTopic=!0),w.deserialize(l),v(JSON.parse(S.serialize()))}catch(e){console.error("error adding node (JsxElement). ",e)}}else try{let t=e.data;if(!(null==t?void 0:t.isAncestorJsxElement))return;w.setOptions(e=>e.skipTopic=!0),w.setProp(p,e=>e[t.key]=t.value),v(JSON.parse(S.serialize()))}catch(e){console.error("error adding node (Not a JsxElement). ",e)}}},[I["flow/editor"]]),(0,r.useEffect)(()=>{w.setOptions(e=>e.skipTopic=!1)},[x]);let T=async()=>{let e=D.parse(u),t=e.data();f(t);let i=null!==(n=null==S?void 0:null===(r=S.getOptions())||void 0===r?void 0:r.resolver)&&void 0!==n?n:{},l=Object.keys(i);try{var r,n,o={};Object.keys(t).forEach(e=>{if(!l.includes(t[e].displayName)){let i={...t[e],custom:{...t[e].custom,unknown:!0},type:{...t[e].type,resolvedName:"Unknown"}};o[e]=i}}),w.deserialize({...t,...o})}catch(e){throw"Error loading editor nodes"}};return(0,A.Z)(["z","Z","s","S","c","C","Delete","Backspace"],e=>{var t,i;let l=(null===(i=p.current)||void 0===i?void 0:null===(t=i.getBoundingClientRect())||void 0===t?void 0:t.height)>0;if(l){if(("z"==e.key||"Z"==e.key)&&(e.ctrlKey||e.metaKey)&&e.shiftKey){try{w.history.redo()}catch(e){console.error("can not redone action")}return}if(("z"==e.key||"Z"==e.key)&&(e.ctrlKey||e.metaKey)){try{w.history.undo()}catch(e){console.error("can not undone action")}return}}}),(0,r.useEffect)(()=>{let e=async t=>{try{await T(),g(!1)}catch(i){t<10?(setTimeout(()=>e(t+1),5e3),g(!0)):console.error("Max retry reached! Error deserializing editor nodes (CraftJS nodes). Error: ".concat(i)),console.error("Error deserializing editor nodes (CraftJS nodes). Error: ".concat(i))}};u&&e(0)},[u]),(0,l.jsxs)("div",{style:{backgroundColor:"rgb(50, 50, 50)",overflow:"hidden",flex:1,display:"flex",flexDirection:"column"},children:[(0,l.jsxs)(C(),{children:[(0,l.jsx)("title",{children:"Platform UI"}),(0,l.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:i(72555)})]}),(0,l.jsx)("div",{className:"page-container",style:{width:"100%",height:"100%"},children:(0,l.jsx)("div",{id:"editor",className:"craftjs-renderer",ref:e=>{p.current=e,J.select(J.hover(e,null),null)},style:{flex:1,position:"relative",overflow:"auto",color:"black",backgroundColor:"#f0f0f0",margin:"0 auto",left:0,right:0,width:"100%",height:"100%"},children:m?(0,l.jsx)(O.Stack,{style:{height:"100vh",justifyContent:"center",alignItems:"center"},children:(0,l.jsxs)("div",{children:[(0,l.jsx)(Z.$,{size:"large",marginBottom:"20px"}),(0,l.jsx)("div",{children:"Loading Content..."})]})}):(0,l.jsx)(K,{children:(0,l.jsx)(n.RQ,{})})})})]})},{topics:["flow/editor"]}),V=i(10131),M=i(70549),H=e=>{var t;let{name:i,color:r,size:n}=e,o=null!==(t=V[i])&&void 0!==t?t:M.Z;return(0,l.jsx)(o,{color:r,size:n})},_=i(38880),W=i(88724);let U=e=>{let{palettes:t,sendMessage:i,currentPage:o}=e,s=r.useRef(null),[d,a]=r.useState(""),{connectors:c,query:p}=(0,n.jE)(),u=Object.keys(t).reduce((e,i)=>{let l=t[i]?Object.keys(t[i]).filter(e=>{var l,r;return!(null===(r=t[i][e].craft)||void 0===r?void 0:null===(l=r.custom)||void 0===l?void 0:l.hidden)}).reduce((e,l)=>{var r,n,o,s;return{...e,[l]:{dropable:!0,element:t[i][l],icon:(r=t[i][l],s="Component",(null==r?void 0:null===(n=r.craft)||void 0===n?void 0:n.custom)&&(null==r?void 0:null===(o=r.craft)||void 0===o?void 0:o.custom.icon)&&(s=r.craft.custom.icon),s)}}},{}):{...e};return{...e,[i]:l}},{}),h=d?Object.keys(u).reduce((e,t)=>{let i=u[t],l=Object.keys(i),r=l.filter(e=>e.toLocaleLowerCase().includes(d.toLocaleLowerCase())).reduce((e,t)=>({...e,[t]:i[t]}),{});var n={};return Object.keys(r).length&&(n={[t]:r}),{...e,...n}},{}):u,f=Object.keys(h).filter(e=>"craft"!=e);function m(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];let e=.95*window.innerHeight;s.current&&(s.current.style.height=e+"px",s.current.style.maxHeight=e+"px")}return r.useEffect(()=>(m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)),[]),(0,l.jsx)("div",{className:"visualui-sidebar",style:{backgroundColor:"rgb(37, 37, 38)"},children:(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column",flex:1,padding:"4px"},children:(0,l.jsxs)("div",{ref:s,style:{padding:"4px",display:"flex",flexDirection:"column",flex:1},children:[(0,l.jsx)("p",{style:{padding:"18px 0px 0px 14px",fontSize:"18px",color:"white",fontWeight:"400"},children:"Components"}),(0,l.jsxs)("div",{style:{display:"flex",margin:"18px 12px 18px 2px",position:"relative"},children:[(0,l.jsx)("input",{style:{fontFamily:"Jost-Regular",padding:"8px 8px 8px 36px",display:"flex",boxSizing:"border-box",fontSize:"14px",backgroundColor:"#323232",borderRadius:"10px",borderWidth:"0px",outline:"none",color:"white",flex:1},value:d,onChange:e=>a(e.target.value),placeholder:"Search..."}),(0,l.jsx)(_.Z,{color:"grey",size:20,style:{position:"absolute",top:"8px",left:"10px"}}),d?(0,l.jsx)(W.Z,{onClick:()=>a(""),color:"white",size:20,style:{position:"absolute",top:"8px",right:"10px",cursor:"pointer"}}):null]}),(0,l.jsx)("div",{className:"visualui-sidebar-list",style:{overflow:"auto",overflowX:"hidden",display:"flex",flexDirection:"column",flex:1},children:f.map((e,t)=>(0,l.jsxs)("div",{style:{flexDirection:"column",display:"flex",marginBottom:"25px"},children:[(0,l.jsx)("p",{style:{paddingLeft:"18px",marginTop:"0px",fontSize:"12px",color:"grey"},children:e}),(0,l.jsx)("div",{className:"visualui-sidebar-list",style:{flex:1,display:"flex",justifyContent:"flex-start",flexWrap:"wrap",alignContent:"flex-start"},children:Object.keys(h[e]).map((t,i)=>{let o=h[e][t];return(null==o?void 0:o.nonDeletable)?null:(0,l.jsx)("div",{title:t,style:{display:"flex",margin:"8px",cursor:"grab"},children:(0,l.jsxs)("div",{ref:e=>c.create(e,()=>o.dropable?(0,l.jsx)(n.W_,{is:o.element,canvas:!0}):r.createElement(o.element)),style:{textAlign:"center",marginTop:"10px",height:"50px",width:"50px",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,l.jsx)(H,{name:o.icon,color:"#a8a29e",size:32}),(0,l.jsx)("div",{style:{marginTop:"5px"},children:(0,l.jsx)("p",{style:{fontSize:"10px",width:"100%",color:"white"},children:t.length>12?t.substring(0,9)+"...":t})})]})},i)})})]},t))})]})})})};var X=i(13296),G=i(53544),$=i(5632),q=i(18827),Y=i.n(q);let ee=e=>{let{children:t,onClick:i,disabled:r=!1}=e;return(0,l.jsx)("div",{onClick:r?()=>null:i,style:{marginBottom:20,backgroundColor:"black",opacity:r?.2:1,borderRadius:"100%",justifyContent:"center",alignItems:"center",width:"40px",height:"40px",display:"flex",cursor:"pointer"},children:t})};var et=(0,r.memo)((0,z.Ic)(e=>{let{rightPanelContent:t,leftPanelContent:i,centerPanelContent:n,rightPanelResizable:o=!1,rightPanelVisible:s=!0,topics:d}=e,a=(0,r.useRef)(),c=(0,r.useRef)(),p=(0,r.useRef)(),u=(0,r.useRef)(null),{publish:h}=d,[f,m]=r.useState(!1),g=(0,$.useRouter)(),x=()=>{let e=window.innerWidth;return 300/e*100},v=()=>{let e=window.innerWidth;return 400/e*100},y=()=>{c.current&&(c.current.style.width="20px",c.current.style.borderRight="1px solid #cccccc20"),p.current&&(p.current.style.display="flex")},b=()=>{if(clearTimeout(u.current),c.current){if(c.current.isDragging)return;c.current.style.width="4px",c.current.style.borderRight="0px"}p.current&&(p.current.style.display="none")};return(0,r.useEffect)(()=>{a.current&&a.current.resize(o?50:v(),"percentages")},[o]),(0,r.useEffect)(()=>{let e=()=>m(!1);return window.addEventListener("dragenter",e),()=>{window.removeEventListener("dragenter",e)}},[]),(0,l.jsxs)("div",{style:{flex:1,display:"flex"},children:[(0,l.jsx)("div",{style:{flex:1,display:f?"flex":"none",position:"absolute",width:x(),zIndex:99999999},children:(0,l.jsx)(Y(),{type:"left",isOpen:!0,size:x(),backdropClicked:()=>m(!1),children:i},"sidebar")}),(0,l.jsxs)("div",{style:{display:f?"none":"flex",position:"fixed",zIndex:1e20,flexDirection:"column",left:"20px",top:"calc(50vh - 80px)"},children:[(0,l.jsx)(ee,{onClick:()=>m(!0),children:(0,l.jsx)(M.Z,{color:"white"})}),(0,l.jsx)(ee,{onClick:()=>h("savenodes",{value:"visual-ui"}),children:(0,l.jsx)(G.Z,{color:"white"})}),(0,l.jsx)(ee,{onClick:()=>{g.push({query:{}})},children:(0,l.jsx)(W.Z,{color:"white"})})]}),(0,l.jsxs)(X.eh,{direction:"horizontal",style:{height:"100%",display:"flex"},children:[(0,l.jsx)(X.s_,{children:(0,l.jsx)("div",{style:{display:"flex",flex:1,height:"100vh"},children:n})}),(0,l.jsx)(X.OT,{onDragging:e=>{c.current&&(c.current.isDragging=e),e||b()},children:(0,l.jsx)("div",{ref:c,onMouseEnter:()=>{u.current=setTimeout(()=>{y()},50)},onMouseLeave:b,style:{backgroundColor:"#252526",display:s&&o?"flex":"none",width:"4px",height:"100%",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)("div",{ref:p,style:{height:"60px",width:"4px",backgroundColor:"white",borderRadius:"20px",display:"none"}})})}),(0,l.jsx)(X.s_,{ref:a,minSize:v(),maxSize:80,defaultSize:o?50:v(),style:{position:s?"relative":"absolute",zIndex:s?1e5:-10,display:"flex"},children:(0,l.jsx)("div",{style:{height:"100%",display:"flex",flex:1},children:t})})]})]})},{topics:["zoomToNode"]})),ei=i(27911),el=e=>{let{sourceCode:t,onChange:i,onSave:r,onEscape:n}=e;return r&&(0,A.Z)(["s","S"],e=>{if(("s"==e.key||"S"==e.key)&&(e.ctrlKey||e.metaKey)&&r)return e.preventDefault(),r()}),n&&(0,A.Z)(["Escape"],e=>{if("Escape"==e.key&&n)return e.preventDefault(),n()}),(0,l.jsx)(ei.ZP,{theme:"vs-dark",defaultLanguage:"javascript",value:t,onChange:e=>i(e)})},er=i(56839),en=i(1674),eo=i(91425),es=i(43748),ed=i(8219),ea=i(89285),ec=i(3402),ep={nodeBackgroundColor:"#252526",borderColor:"grey",blockPort:"grey",flowPort:"grey",dataPort:"grey",textColor:"#CCCCCC",dataOutputColor:"grey",nodeBorderColor:"grey",edgeColor:"grey",titleColor:"black"},eu=i(66306),eh=i(64973),ef=JSON.parse('[{"id":"Container","title":"Container","path":"*","type":"JsxElement","filter":{"name":"Container"},"body":[{"type":"protolibProps","props":["flexDirection","justifyContent","alignContent","alignItems","width","height"]},{"type":"child","child":[{"label":"Child1","field":"child-1","fieldType":"child","type":"child"}]}]},{"id":"Center","title":"Center","path":"*","type":"JsxElement","filter":{"name":"Center"},"body":[{"type":"prop","prop":[{"label":"backgroundColor","field":"prop-backgroundColor","fieldType":"prop","static":true,"type":"colorPicker"}],"disableAdd":true},{"type":"protolibProps","props":["flexDirection","justifyContent","alignContent","alignItems","width","height"]},{"type":"child","child":[{"label":"Child1","field":"child-1","fieldType":"child","type":"child"}]}]},{"id":"Image","title":"Image","path":"*","type":"JsxElement","filter":{"name":"Image"},"body":[{"type":"protolibProps","props":["width","height","opacity"]},{"type":"prop","prop":[{"label":"url","field":"prop-url","fieldType":"prop","static":true,"type":"prop"}]}]},{"id":"Page","title":"Page","path":"*","type":"JsxElement","filter":{"name":"Page"},"body":[{"type":"protolibProps","props":["*"]},{"type":"prop","prop":[{"label":"title","field":"prop-title","fieldType":"prop","static":true,"type":"prop"}],"disableAdd":false},{"type":"child","child":[{"label":"Child1","field":"child-1","fieldType":"child","type":"child"}]}]},{"id":"BigTitle","title":"BigTitle","path":"*","type":"JsxElement","filter":{"name":"BigTitle"},"body":[{"type":"child","child":[{"label":"caption","field":"child-1","fieldType":"child","type":"child"}],"disableAdd":true},{"type":"protolibProps","props":["color","textAlign","margin","padding"]},{"type":"prop","prop":[]}]},{"id":"Head1","title":"Head1","path":"*","type":"JsxElement","filter":{"name":"Head1"},"body":[{"type":"child","child":[{"label":"caption","field":"child-1","fieldType":"child","type":"child"}],"disableAdd":true},{"type":"protolibProps","props":["color","textAlign","margin","padding","alignSelf"]},{"type":"prop","prop":[]}]},{"id":"Head2","title":"Head2","path":"*","type":"JsxElement","filter":{"name":"Head2"},"body":[{"type":"child","child":[{"label":"caption","field":"child-1","fieldType":"child","type":"child"}],"disableAdd":true},{"type":"protolibProps","props":["color","textAlign","margin","padding","alignSelf"]},{"type":"prop","prop":[]}]},{"id":"Head3","title":"Head3","path":"*","type":"JsxElement","filter":{"name":"Head3"},"body":[{"type":"child","child":[{"label":"caption","field":"child-1","fieldType":"child","type":"child"}],"disableAdd":true},{"type":"protolibProps","props":["color","textAlign","margin","padding","alignSelf"]},{"type":"prop","prop":[]}]},{"id":"RainbowText","title":"RainbowText","path":"*","type":"JsxElement","filter":{"name":"RainbowText"},"body":[{"type":"child","child":[{"label":"caption","field":"child-1","fieldType":"child","type":"child"}],"disableAdd":true},{"type":"protolibProps","props":["textAlign","margin","padding"]},{"type":"prop","prop":[]}]},{"id":"DefaultLayout","title":"DefaultLayout","path":"*","type":"JsxElement","filter":{"name":"DefaultLayout"},"body":[{"type":"prop","prop":[{"label":"title","field":"prop-title","fieldType":"prop","static":true,"type":"input"},{"label":"description","field":"prop-description","fieldType":"prop","static":true,"type":"prop"}]},{"type":"child","child":[{"label":"Child1","field":"child-1","fieldType":"child","type":"child"}]}]},{"id":"MainButton","title":"MainButton","path":"*","type":"JsxElement","filter":{"name":"MainButton"},"body":[{"type":"child","child":[{"label":"caption","field":"child-1","fieldType":"child","type":"child"}],"disableAdd":true},{"type":"protolibProps","props":["margin","padding"]},{"type":"prop","prop":[{"label":"color","field":"prop-color","fieldType":"prop","static":true,"type":"colorPicker"},{"label":"textColor","field":"prop-textColor","fieldType":"prop","static":true,"type":"colorPicker"}]}]},{"id":"BlockTitle","title":"BlockTitle","path":"*","type":"JsxElement","filter":{"name":"BlockTitle"},"body":[{"type":"prop","prop":[{"label":"title","field":"prop-title","fieldType":"prop","static":true,"type":"prop"},{"label":"subtitle","field":"prop-subtitle","fieldType":"prop","static":true,"type":"prop"}],"disableAdd":true},{"type":"protolibProps","props":["margin","padding"]}]}]'),em=i(73235),eg=i(17788),ex=i(11001),ev=i(81395);function ey(){let e=(0,em._)(["\n  height: ",";\n  flex: ",";\n  color: #545454;\n"]);return ey=function(){return e},e}let eb=eg.default.div(ey(),e=>e.visible&&e.height&&"full"!==e.height?"".concat(e.height):"auto",e=>e.visible&&e.height&&"full"===e.height?"1":"unset"),eE=e=>{let{visible:t,icon:i,title:n,children:o,height:s,onChange:d}=e;return(0,l.jsxs)(eb,{visible:t,height:s,style:{display:"flex",flexDirection:"column"},children:[(0,l.jsxs)("div",{onClick:()=>{d&&d(!t)},style:{cursor:"pointer",backgroundColor:"#191919",borderBottom:"1px solid #cccccc20",alignItems:"center",padding:"10px",flexDirection:"row",display:"flex"},children:[(0,l.jsxs)("div",{style:{display:"flex",flex:1,alignItems:"center"},children:[r.createElement(i,{size:18,color:"white"}),(0,l.jsx)("div",{style:{fontSize:18,marginLeft:"10px",color:"white"},children:n})]}),t?(0,l.jsx)(ex.Z,{size:18}):(0,l.jsx)(ev.Z,{size:18})]}),(0,l.jsx)(R.FA,{style:{display:t?"flex":"none",flex:1,flexDirection:"column",overflowY:"scroll"},children:o})]})},eC="flows-ui",eA=(0,ec.Ar)(eC);var eI=(0,r.memo)((0,z.Ic)(function(e){let{isActive:t=!0,sourceCode:i="",sendMessage:s,currentPage:d="",userPalettes:c={},resolveComponentsDir:p="",topics:u,metadata:h={}}=e,f=(0,r.useRef)(),[m,g]=(0,r.useState)(!1),v=a(e=>e.currentPageContent),y=a(e=>e.setCurrentPageContent),[E,C]=(0,r.useState)(v),[A,I]=(0,r.useState)(!1),[j,w]=(0,r.useState)(!0),[S,J]=(0,r.useState)(!1),[k,T]=(0,r.useState)(!0),[N,P]=(0,r.useState)(!1),{data:D}=u,z={...b,...c},O=Object.keys(z).reduce((e,t)=>e={...e,...z[t]},{}),K=async()=>{y(i)},B=async(e,t,i)=>{var l=t;switch(e){case"monaco":s({type:"save",data:{content:l=E}});break;case"flows":if(!i)break;let r=L(l),n=r.getImportDeclarations(),o=Q(i.nodes,i.nodesData,p);if(o.length){let e=o.reduce((e,t)=>{var i,l,r,n,o;let s;let d=t.moduleSpecifier;if(null===(i=t.namedImports)||void 0===i?void 0:i.length){let e=(null===(l=t.namedImports[0])||void 0===l?void 0:l.alias)?(null===(r=t.namedImports[0])||void 0===r?void 0:r.name)+" as "+(null===(n=t.namedImports[0])||void 0===n?void 0:n.alias):null===(o=t.namedImports[0])||void 0===o?void 0:o.name;s="import {"+e+'} from "'+d+'";\n'}else t.defaultImport&&(s="import "+t.defaultImport+' from "'+d+'";\n');return e+s},"\n"),t=n?n[n.length-1].getEnd():0,i=r.insertText(t,e);l=i.getText()}s({type:"save",data:{content:l}})}};(0,r.useEffect)(()=>{C(v)},[v]),(0,r.useEffect)(()=>{K()},[i]),(0,r.useEffect)(()=>{var e;(null===(e=D.zoomToNode)||void 0===e?void 0:e.id)&&!S&&J(!0)},[D.zoomToNode]);let Z=(0,l.jsx)("div",{style:{display:"flex",width:"100%",top:S?0:-1e12,position:S?"relative":"absolute",height:"100%"},children:(0,l.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100vh"},children:[(0,l.jsxs)("div",{style:{padding:"10px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",zIndex:9999999999999,backgroundColor:"#252526",borderBottom:"1px solid #cccccc20"},children:[(0,l.jsx)(R.sL,{theme:"dark",children:(0,l.jsx)(eu.zx,{onPress:e=>{J(!1),g(!1),e.stopPropagation()},hoverStyle:{opacity:1},opacity:.7,size:"$3",chromeless:!0,circular:!0,noTextWrap:!0,children:(0,l.jsx)(er.Z,{fillOpacity:0,style:{alignSelf:"center"},opacity:.5,color:"var(--color)"})})}),(0,l.jsxs)(R.sL,{display:A?"flex":"none",theme:"dark",marginVertical:"$1",children:[(0,l.jsx)(eu.zx,{size:"$3",chromeless:!0,circular:!0,marginRight:"$2",onPress:()=>{C(v),I(!1)},children:(0,l.jsx)(W.Z,{})}),(0,l.jsx)(eu.zx,{size:"$3",chromeless:!0,circular:!0,onPress:()=>B("monaco",E),children:(0,l.jsx)(G.Z,{fillOpacity:0})})]}),(0,l.jsxs)(eh.t,{display:A?"none":"flex",theme:"dark",type:"single",defaultValue:"preview",disableDeactivation:!0,children:[(0,l.jsx)(eh.t.Item,{value:"code",onPress:()=>g(!0),children:(0,l.jsx)(en.Z,{})}),(0,l.jsx)(eh.t.Item,{value:"flow",onPress:()=>{w(!1),g(!1)},children:(0,l.jsx)(eo.Z,{})}),(0,l.jsx)(eh.t.Item,{value:"preview",onPress:()=>{w(!0),g(!1)},children:(0,l.jsx)(es.Z,{})})]})]}),(0,l.jsx)("div",{style:{display:m?"flex":"none",flex:1},children:(0,l.jsx)(el,{onChange:e=>{C(e),v!=e?I(!0):I(!1)},sourceCode:E})}),(0,l.jsxs)("div",{style:{opacity:1,marginRight:0,flex:1,display:m?"none":"flex",flexDirection:"column",backgroundColor:"#252526"},children:[(0,l.jsx)(eE,{icon:ed.Z,title:"Customize",height:N?"55%":"full",visible:k,onChange:e=>T(e),children:(0,l.jsx)(eA,{disableDots:!t||j,sourceCode:v,setSourceCode:y,customComponents:[],onSave:(e,t,i)=>B("flows",e,i),enableCommunicationInterface:!0,config:{masks:ef},zoomOnDoubleClick:!j,flowId:eC,themeMode:"dark",bgColor:"#252526",theme:ep,nodePreview:j,metadata:h})}),(0,l.jsx)(eE,{icon:ea.Z,title:"Layers",visible:N,onChange:e=>P(e),height:k?"55%":"full",children:(0,l.jsx)(o.S9,{})})]})]})},"auxiliarySidebar"),V=(0,l.jsx)("div",{style:{display:"flex",flex:1,height:"100%"},children:(0,l.jsx)(U,{palettes:z,sendMessage:s,currentPage:d})},"sidebar"),M=(0,l.jsx)("div",{id:"editor-layout",style:{flex:1,display:"flex",minWidth:"280px",borderRight:"2px solid #424242",borderLeft:"2px solid #424242"},children:(0,l.jsx)(F,{onSave:()=>null,resolveComponentsDir:p})});function H(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];let e=window.innerHeight;f.current&&(f.current.style.height=e+"px")}return(0,r.useEffect)(()=>(H(),window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)),[]),(0,l.jsx)("div",{ref:f,style:{display:"flex",flex:1,width:"100%"},children:(0,l.jsx)(n.ML,{resolver:O,onRender:x,children:(0,l.jsx)("div",{style:{display:"flex",flex:1,flexDirection:"row"},children:(0,l.jsx)(et,{leftPanelContent:V,centerPanelContent:M,rightPanelContent:Z,rightPanelResizable:!j,rightPanelVisible:S})})})})},{topics:["zoomToNode"]}));function ej(e,t,i){let l={type:"".concat("visualui","-").concat(e,"-").concat(t),data:i};window.parent.postMessage(l,"*")}var ew=e=>{let{userPalettes:t={},isVSCode:i=!1,_sourceCode:n="",_resolveComponentsDir:o="@/uikit",_currentPage:s="",onSave:d=()=>null,metadata:a={}}=e,[c,p]=(0,r.useState)(s),[u,h]=(0,r.useState)(o),[f,m]=(0,r.useState)(n);async function g(e){let t=e.data,i=t.type,l=t.data;switch(i){case"protofypanel-visualui-init":m(l.sourceCode),h(l.resolveComponentsDir),p(l.pages?l.pages[0]:"");break;case"protofypanel-visualui-read-response":m(l.sourceCode);break;default:console.error("Could not handle event of type: ",i)}}let x=async e=>{let t=e.type,l=e.data;switch(t){case"loadPage":let r=l.pageName;p(r),ej("protofypanel","read",{file:r});break;case"save":let n=l.content;i?ej("protofypanel","write",{path:c,content:n}):d(function(e){let t;try{t=T().format(e,{bracketSameLine:!0,jsxBracketSameLine:!0,singleAttributePerLine:!1,printWidth:1e3,quoteProps:"consistent",jsxSingleQuote:!1,parser:"typescript",plugins:[J()]})}catch(e){console.error("Could not format text. Error: "+e)}return null!=t?t:e}(n))}};return(0,r.useEffect)(()=>{window.addEventListener("message",g),ej("protofypanel","ready",{})},[]),(0,l.jsx)(z.US,{children:f?(0,l.jsx)(eI,{sourceCode:f,currentPage:c,userPalettes:t,sendMessage:x,resolveComponentsDir:"".concat(u,"/"),metadata:a}):null})}}}]);