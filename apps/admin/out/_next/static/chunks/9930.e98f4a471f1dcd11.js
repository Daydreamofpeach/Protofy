"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9930],{9930:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var i=a(52322),l=a(3402),o=a(64509),n=a(2784),s=a(10729),r=a(92467),d=a(15729);let p=(0,r.Z)((e,t)=>({devicesList:{},electronicDevice:"mydevice",setElectronicDevice:t=>e((0,d.ZP)(e=>{e.electronicDevice=t})),setDevicesList:t=>e((0,d.ZP)(e=>{e.devicesList=t}))})),c=(e,t)=>e.find(e=>e.targetHandle==t||e.sourceHandle==t);var m=a(34406);let u=m.env.NEXT_PUBLIC_PROJECT_NAME;var b=e=>{let{componentName:t,type:a}=e,l=p(e=>e.electronicDevice),[o,s]=n.useState(!1);return n.useEffect(()=>{if(console.log("NODEBUS: subscribe attempt: ",o,l,a,t),!l||!a||!t)return;let e=h(l,a,t);e&&console.log("Subs NODEBUS topic: ",e)},[t,a,l]),(0,i.jsx)(i.Fragment,{})};let v=e=>e?e.replace(/['"]+/g,""):"",h=(e,t,a)=>e&&t&&a?"".concat(u,"/").concat(e,"/").concat(t,"/").concat(a,"/state"):null,g=[{id:"esp32dev",type:"ArrayLiteralExpression",check:(e,t)=>"ArrayLiteralExpression"==e.type&&'"esp32dev"'==t["element-1"],getComponent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{publish:o,data:r}=a,{id:d,type:m}=e,u=(0,n.useContext)(l.pN),b=u(e=>e.setNodeData);p(e=>e.electronicDevice);let v=(0,s.Mi)(),h=Array(34).fill(1).map((e,t)=>{if(9!=t&&14!=t&&13!=t&&15!=t&&21!=t&&33!=t&&28!=t)return"".concat(t+2,"-").concat(t>14?"l":"r","-").concat(t)});return console.log("DevicePositioning: ",h),t._devicePositioning||b(e.id,{...t,_devicePositioning:h}),console.log("NodeData: ",t),console.log("node: ",e),console.log("Calculanting: ",Object.keys(t).filter(e=>e.includes("element-")&&!e.includes("trivia"))),console.log("Boolean value: ",Object.keys(t).filter(e=>e.includes("element-")&&!e.includes("trivia")).length>35),(0,i.jsxs)(l.NB,{output:!1,skipCustom:!0,node:e,color:"#8FCAF9",isPreview:!d,title:"ESP32",id:d,margin:"200px",children:[(0,i.jsx)("div",{style:{marginTop:"20px",marginBottom:"20px"},children:(0,i.jsx)("img",{src:"/admin/_next/static/media/esp32c4.9d0ad35f.png",style:{width:"100%"}})}),Array(34).fill(1).map((e,t)=>{if(9!=t&&14!=t&&13!=t&&15!=t&&21!=t&&33!=t&&28!=t){let e="".concat(d).concat(l.LL.data,"element-").concat(t+2);return(0,i.jsx)(s.HH,{isConnectable:!c(v,e),isValidConnection:e=>{let t=c(v,e.sourceHandle);return!t},type:"target",style:{position:"absolute",top:t>14?27.8*(t-15)+145.8+"px":27.8*t+257+"px",width:"17px",height:"17px",backgroundColor:c(v,e)?"#BA68C8":"white",marginLeft:t>14?"0px":"9px",marginRight:t>14?"9px":"0px",border:c(v,e)?"2px solid #BA68C8":"2px solid white"},position:t>14?s.Ly.Right:s.Ly.Left,id:e},t)}}),(0,i.jsx)(l.g1,{id:d,nodeData:t,type:"Component",style:{marginBottom:"20px"}})]})},getInitialData:()=>({to:'"esp32dev"'}),hidden:!0,nonDeletable:!0},{id:"Wifi",type:"CallExpression",check:(e,t)=>{var a;return"CallExpression"==e.type&&(null===(a=t.to)||void 0===a?void 0:a.startsWith("wifi"))},getComponent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&arguments[2],(0,i.jsx)(l.NB,{node:e,isPreview:!e.id,title:"Wifi",color:"#FFDF82",id:e.id,skipCustom:!0,disableInput:!0,disableOutput:!0,children:(0,i.jsx)(l.kz,{id:e.id,params:[{label:"SSID",field:"param1",type:"input",static:!0},{label:"Password",field:"param2",type:"input",static:!0},{label:"Power mode",field:"param3",type:"select",static:!0,data:['"none"','"light"','"high"']}]})})},getInitialData:()=>({to:"wifi",param1:'"SSID"',param2:'"PASSWORD"',param3:'"none"'})},{id:"Mqtt",type:"CallExpression",check:(e,t)=>{var a;return"CallExpression"==e.type&&(null===(a=t.to)||void 0===a?void 0:a.startsWith("mqtt"))},getComponent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&arguments[2],(0,i.jsx)(l.NB,{node:e,isPreview:!e.id,title:"Mqtt",color:"#FFDF82",id:e.id,skipCustom:!0,disableInput:!0,disableOutput:!0,children:(0,i.jsx)(l.kz,{id:e.id,params:[{label:"Broker",field:"param1",type:"input",static:!0}]})})},getInitialData:()=>({to:"mqtt",param1:'"BROKERADDRESS"',param2:'""'})},{id:"Relay",type:"CallExpression",check:(e,t)=>{var a;return"CallExpression"==e.type&&(null===(a=t.to)||void 0===a?void 0:a.startsWith("relay"))},getComponent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&arguments[2],(0,i.jsx)(l.NB,{node:e,isPreview:!e.id,title:"GPIO Switch",color:"#FFDF82",id:e.id,skipCustom:!0,disableInput:!0,disableOutput:!0,children:(0,i.jsx)(l.kz,{id:e.id,params:[{label:"Name",static:!0,field:"param1",type:"input"},{label:"Restore Mode",static:!0,field:"param2",type:"select",data:['"ALWAYS_ON"','"ALWAYS_OFF"']}]})})},getInitialData:()=>({to:"relay",param1:'""',param2:'"ALWAYS_OFF"'})},{id:"BinarySensor",type:"CallExpression",check:(e,t)=>{var a;return"CallExpression"==e.type&&(null===(a=t.to)||void 0===a?void 0:a.startsWith("binarySensor"))},getComponent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};arguments.length>2&&arguments[2];let[a,o]=n.useState(v(t.param1)),s=[{label:"Name",static:!0,field:"param1",type:"input",onBlur:()=>{o(v(t.param1))}}];return(0,i.jsxs)(l.NB,{node:e,isPreview:!e.id,title:"Button",color:"#A5D6A7",id:e.id,skipCustom:!0,children:[(0,i.jsx)(l.kz,{id:e.id,params:s}),(0,i.jsx)(b,{componentName:a,type:"binary_sensor"})]})},getInitialData:()=>({to:"binarySensor",param1:'""'})},{id:"NeopixelsBus",type:"CallExpression",check:(e,t)=>{var a;return"CallExpression"==e.type&&(null===(a=t.to)||void 0===a?void 0:a.startsWith("neopixelsBus"))},getComponent:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};arguments.length>2&&arguments[2];let o=[{label:"Name",static:!0,field:"param1",type:"input"},{label:"#LEDS",static:!0,field:"param2",type:"input"},{label:"RGB Order",static:!0,field:"param3",type:"select",data:['"GRB"','"GBR"','"BGR"','"BRG"','"RGB"','"RBG"','"GRBW"','"GBRW"','"BGRW"','"BRGW"','"RGBW"','"RBGW"']},{label:"Chipset",static:!0,field:"param4",type:"select",data:['"800KBPS"','"400KBPS"','"400KBPS"','"WS2811"','"WS2812X"','"WS2812"','"SK6812"','"TM1814"','"TM1829"','"TM1914"','"APA106"','"LC8812"']},{label:"Restore Mode",static:!0,field:"param5",type:"select",data:['"RESTORE_DEFAULT_OFF"','"RESTORE_DEFAULT_ON"','"RESTORE_INVERTED_DEFAULT_OFF"','"RESTORE_INVERTED_DEFAULT_ON"','"RESTORE_AND_OFF"','"RESTORE_AND_ON"','"ALWAYS_OFF"','"ALWAYS_ON"']},{label:"Default transition",static:!0,field:"param6",type:"input",error:["s","ms"].includes(null===(e=a.param6)||void 0===e?void 0:e.replace(/['"0-9]+/g,""))?null:"Add units s/ms"},{label:"Channel",static:!0,field:"param7",type:"select",data:["0","1","2","3","4","5","6","7"]},{label:"Pulse",static:!0,field:"param8",type:"boolean"},{label:"Random",static:!0,field:"param9",type:"boolean"},{label:"Strobe",static:!0,field:"param10",type:"boolean"},{label:"Flicker",static:!0,field:"param11",type:"boolean"},{label:"Adressable Rainbow",static:!0,field:"param12",type:"boolean"},{label:"Adressable Color Wipe",static:!0,field:"param13",type:"boolean"},{label:"Adressable Scan",static:!0,field:"param14",type:"boolean"},{label:"Adressable Twinkle",static:!0,field:"param15",type:"boolean"},{label:"Adressable Random Twinkle",static:!0,field:"param16",type:"boolean"},{label:"Adressable Fireworks",static:!0,field:"param17",type:"boolean"},{label:"Adressable Flicker",static:!0,field:"param18",type:"boolean"}];return(0,i.jsx)(l.NB,{node:t,isPreview:!t.id,title:"Neopixels",color:"#C5E1A4",id:t.id,skipCustom:!0,disableInput:!0,disableOutput:!0,children:(0,i.jsx)(l.kz,{id:t.id,params:o})})},getInitialData:()=>({to:"neopixelsBus",param1:'""',param2:"16",param3:'"GRB"',param4:'"WS2811"',param5:'"ALWAYS_ON"',param6:'"1s"',param7:"0",param8:!1,param9:!1,param10:!1,param11:!1,param12:!1,param13:!1,param14:!1,param15:!1,param16:!1,param17:!1,param18:!1})},{id:"ADCSensor",type:"CallExpression",check:(e,t)=>{var a;return"CallExpression"==e.type&&(null===(a=t.to)||void 0===a?void 0:a.startsWith("adcSensor"))},getComponent:function(){var e,t;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};arguments.length>2&&arguments[2];let[s,r]=n.useState(o.param1),d=[{label:"Name",static:!0,field:"param1",type:"input",onBlur:()=>{r(o.param1)},error:(null===(e=o.param1)||void 0===e?void 0:e.replace(/['"]+/g,""))=="adc"?"Reserved name":null},{label:"Update Interval",static:!0,field:"param2",type:"input",error:["h","m","s","ms"].includes(null===(t=o.param2)||void 0===t?void 0:t.replace(/['"0-9]+/g,""))?null:"Add units h/m/s/ms"},{label:"Attenuation",static:!0,field:"param3",type:"select",data:['"auto"','"0db"','"2.5db"','"6db"','"11db"']}];return(0,i.jsx)(l.NB,{node:a,isPreview:!a.id,title:"Analog Sensor",color:"#FFCC80",id:a.id,skipCustom:!0,children:(0,i.jsx)(l.kz,{id:a.id,params:d})})},getInitialData:()=>({to:"adcSensor",param1:'"analogic"',param2:'"30s"',param3:'"auto"'})}];var y=g.map(e=>({...e,capabilities:["esphome"]}));let f=[...y];var C=e=>{var t,a,s,r,d,p,c;let{mode:m="js",...u}=e,b=u.uiFlowId||"flows-editor",v=(0,l.Ar)(b),[h,g]=(0,n.useState)(u.content);return u.preload?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)(o.US,{children:[u.isModified?u.icons:null,(0,i.jsx)(v,{path:u.path,mode:(()=>{if(u.path){if(u.path.endsWith(".json"))return"json";if(u.path.endsWith("yml")||u.path.endsWith("yaml"))return"yaml"}return m})(),config:{masks:[],layers:[]},bgColor:null!==(t=u.bgColor)&&void 0!==t?t:"transparent",dataNotify:e=>{e.notifyId},themeMode:u.themeMode,disableDots:null!==(a=u.disableDots)&&void 0!==a&&a,customComponents:f,sourceCode:u.sourceCode,setSourceCode:u.setSourceCode,positions:[],getFirstNode:u.getFirstNode,onSave:u.onSave,onPlay:u.onPlay,hideBaseComponents:null!==(s=u.hideBaseComponents)&&void 0!==s&&s,disableSideBar:!0,disableStart:null!==(r=u.disableStart)&&void 0!==r&&r,onShowCode:u.onShowCode,onReload:u.onReload,display:!0,flowId:"flows-editor",onEdit:e=>{u.setIsModified&&u.setIsModified(!0),g(e),u.onEdit&&u.onEdit(e)},theme:null!==(d=u.theme)&&void 0!==d?d:{},disableMiniMap:!0,showActionsBar:null!==(p=u.showActionsBar)&&void 0!==p&&p,bridgeNode:null===(c=u.bridgeNode)||void 0===c||c},"flow")]})}}}]);